# 微服务

###### Spring Cloud Eureka集群

参照文档：https://blog.csdn.net/weixin_40470497/article/details/83625718?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control

## 启动类

```java
//开启对EurekaServer的支持，即：作为Eureka服务端
@EnableEurekaServer
////开启作为Eureka Server的客户端的支持
//@EnableDiscoveryClient
@SpringBootApplication
public class EurekaApplication {

    public static void main(String[] args) {
        SpringApplication.run(EurekaApplication.class, args);
    }

}
```

## 系统环境

 高并发微服务添加`hosts`文件添加

```url 
C:\Windows\System32\drivers\etc\hosts
```

```xml
127.0.0.1       eureka1
127.0.0.1       eureka2
```

## application.yml 文件

```xml
spring:
  application:
    # 服务名称
    name: spring-cloud-eureka-server
server:
  # 端口号
  port: 8761

eureka:
  instance:
    hostname: eureka1
  client:
    service-url:
      # 默认注册地址
#      defaultZone: http://localhost:${server.port}/eureka/
      # 双服务中心
      defaultZone: http://eureka2:8762/eureka/
    # 当前服务是否注册到eureka
    register-with-eureka: true
    # 表示eurekaServer是否获取服务地址
    fetch-registry: true

```

```xml
spring:
  application:
    # 服务名称
    name: spring-cloud-eureka-server-replica
server:
  # 端口号
  port: 8762

eureka:
  instance:
    hostname: eureka2
  client:
    service-url:
      # 默认注册地址
#      defaultZone: http://localhost:${server.port}/eureka/
      # 双服务中心
      defaultZone: http://eureka1:8761/eureka/
    # 当前服务是否注册到eureka
    register-with-eureka: true
    # 表示eurekaServer是否获取服务地址
    fetch-registry: true

```

## pom.xml 文件

```xml
     <dependency>
            <groupId>org.springframework.cloud</groupId>
            <artifactId>spring-cloud-starter-netflix-eureka-server</artifactId>
        </dependency>
```

